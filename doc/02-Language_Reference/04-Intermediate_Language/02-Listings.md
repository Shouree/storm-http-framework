Listings
========

A listing is a list of instructions in the intermediate language that will eventually be compiled
into a function that can be executed by the CPU. The listing also stores metadata that describes the
context in which the code operates. This metadata includes:

- Parameters to the function.
- Return value from the function.
- Local variables.
- Exception handling information.
- Labels in the function.

To allow the code in the listing to refer to variables and labels in the listing, the listing
assigns each label and variable a unique name. Since the Intermediate Language is designed as a
compilation target for other languages, the names are simply integer indexes. However, because the
listing is in charge of assigning the names for variables and labels, the listing can be thought of
as representing a namespace for these names, since the created names are only meaningful in the
context of the listing that created them.

Listings are represented by the class `lang.asm.Listing`. In Basic Storm, it is possible to create a
listing as follows:

```bs
use lang:bs:macro; // For named{}
use core:asm;

void main() {
    // Is the function going to be a member function?
    Bool isMember = false;

    // What is the result type of the function?
    TypeDesc resultType = named{Int}.typeDesc();

    // Create the listing:
    Listing listing(isMember, resultType);

    // Add code to the listing:
    listing << prolog();
    // ...

    print(listing.toS());
}
```

As we can see from the code above, creating a listing requires knowing the type returned from the
listing, and if it is a member function of a type or not. The reason for this is that these two
pieces of information affect the calling convention on some systems.


Labels
------

As previously mentioned, a listing acts as a namespace for labels and variables. Therefore, new and
unique names for labels are generated by the listing itself using the `label` member:

```bsstmt
Label loopStart = listing.label();
```

Labels can then be inserted into the listing using the `<<` operator. This makes the label refer to
the next instruction that is inserted:

```bsstmt
listing << loopStart;
listing << instr;
```


Variables and Parameters
------------------------

The Listing also keeps track of variables and parameters...

