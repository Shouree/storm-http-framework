use ui;
use core:geometry;
use core:debug;

class MainWin extends Frame {
	Button btn;

	ctor() {
		init("Test window") {
			btn("Click me!", &btnClicked(Button));
		}
		size(Size(150, 150));

		add(btn);

		create();
	}

	void resized(Size s) {
		Size border = 8;
		Point tl = border;
		Size sz = s - 2*border;
		btn.pos(Rect(tl, sz));
	}

}

void btnClicked(Button btn) {
	btn.text("Well done!");
}

thread Waiter;

void closeLater(MainWin w) on Waiter {
	dbgSleep(4000);
	w.close;
}

void main() {
	MainWin win;
	spawn closeLater(win);
	win.waitForClose;
}
