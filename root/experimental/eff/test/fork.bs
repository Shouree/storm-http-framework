use experimental:eff;
use test;

effect Fork {
	unsafe effect void fork();
}

handler ForkHandler(void->void) for Fork {
	handle fork(), k {
		k.call();
		k.call();
	}
}

suite ForkTest {
	handle ForkHandler {
		print("Before");
		Fork:fork();
		print("After");
	};
}


void f(NonMovable x) {
	print(x.x);
}

suite A {
	print("Creating value.");
	NonMovable x;
	x.x = "hej";
	f(x);
}
